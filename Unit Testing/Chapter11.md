# 단위테스트 안티페턴

## 비공개 메서드 테스트
- 비공개 메서드는 테스트 하지 않는다.
- 비공개 메서드는 구현의 세부사항이기 때문이다.
- 구현의 세부사항이 노출되고 테스트에 결합되면 리팩터링 내성이 떨어진다.

## 비공개 상태 노출
- 테스트를 위해 비공개인 상태를 노출하지 않는다.
- 비공개 상태 또한 식별할 수 있는동작이 아니기 때문이다.
- SUT가 처리하고자 하는 업무를 검증하는것이 타당.

## 테스트로 유출된 도메인 지식
- 테스트 작성시 테스트 대상에서 사용하는 알고리즘을 복사해서 테스트 결과 검증으로 사용하지 말라는 것.
- 당연하지만 테스트 자체의 의미가 없어진다.
- 검증은 입력파라메터데비 예상 출력값을 하드코딩 하여 진행한다.

## 코드 오염
- 테스트를 위해 필요한 코드가 제품에 포함되지 않도록 한다.
- 제품코드와 테스트코드가 혼용되면 제품코드를 파악하는데 시간이 소모되어 유지비 증가로 이어진다.
- 따라서 테스트를 위한 코드는 테스트에서만 작동되도록 구성한다.

## 구체클레스 목으로 처리
- 도메인로직에 프로세스 외부의존성이 포함될경우 구체클래스를 목으로 처리하려 할수있는데..
- 구체클래스를 목으로 처리할경우 단일책임원칙을 위반하지 않았는지 확인해야함.
- 책임을 적절히 분리하여 비관리 의존성의 책임을 별도의 인터페이스로 도출하자.


## 시간 처리하기
- 시간을 앰비언트 컨텍스트로 처리하지 말라는것.
- 엠비언트 컨텍스트는 이전장에 이미 소개됨.
- 이러한 엠비언트 컨텍스트는 명시적으로 도출하여 도메인에 주임되도록한다.